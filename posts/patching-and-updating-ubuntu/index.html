<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="Patching and Updating Ubuntu" /><meta property="og:locale" content="en" /><meta name="description" content="Overview" /><meta property="og:description" content="Overview" /><link rel="canonical" href="https://www.techbythenerd.com/posts/patching-and-updating-ubuntu/" /><meta property="og:url" content="https://www.techbythenerd.com/posts/patching-and-updating-ubuntu/" /><meta property="og:site_name" content="TechByTheNerd" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-05-31T18:30:00-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Patching and Updating Ubuntu" /><meta name="twitter:site" content="@techbythenerd" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-05-31T23:51:39-04:00","datePublished":"2022-05-31T18:30:00-04:00","description":"Overview","headline":"Patching and Updating Ubuntu","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.techbythenerd.com/posts/patching-and-updating-ubuntu/"},"url":"https://www.techbythenerd.com/posts/patching-and-updating-ubuntu/"}</script><title>Patching and Updating Ubuntu | TechByTheNerd</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="TechByTheNerd"><meta name="application-name" content="TechByTheNerd"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/54506297?s=200&v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">TechByTheNerd</a></div><div class="site-subtitle font-italic">Tech by a nerd, for the nerds.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/TechByTheNerd" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/techbythenerd" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['no-reply','techbythenerd.com?subject=Undeliverable.'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Patching and Updating Ubuntu</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Patching and Updating Ubuntu</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1654036200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> May 31, 2022 </em> </span> <span> Updated <em class="" data-ts="1654055499" data-df="ll" data-toggle="tooltip" data-placement="bottom"> May 31, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/username">TechByTheNerd</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1545 words"> <em>8 min</em> read</span></div></div></div><div class="post-content"><h2 id="overview"><span class="mr-2">Overview</span><a href="#overview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>It’s important to keep your servers patched to the latest, stable version of software. Patching often is risky; patching rarely is risky. There will always be risk. However, Linux patching seems to be very, very stable. It’s quite rare to run into an issue while upgrading software.</p><p>With that said, devise an upgrade scheme that is compatible with your risk tolerance. If you upgrade once per quarter, you could be going months with an unpatched, vulnerable machine. If you patch every day, you might have outages. So, decide what is right for you.</p><h3 id="update-script"><span class="mr-2">Update Script</span><a href="#update-script" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>An easy script you can deploy to any Debian-based Linux distribution is this <code class="language-plaintext highlighter-rouge">update.sh</code>. Before running it, would be ideal to install two packages:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>figlet neofetch
</pre></table></code></div></div><p><strong>Figlet</strong> is a tool that prints things in very big letters. This script will output the computer name in big letters. <strong>Neofetch</strong> is a utility that shows the operating system logo, and basic information about the current computer.</p><blockquote class="prompt-info"><div><p><strong>Note:</strong></p><p>What this script does is:</p><ul><li>Refreshes the repository cache<li>Upgrades all upgradeable packages<li>Attempts upgrades for packages that have dependencies<li>Cleans up unused and cached packages</ul><p>Then, it sees if a reboot is required, and prompts you if it is.</p></div></blockquote><p>Consider copying the code below and save this as <code class="language-plaintext highlighter-rouge">/root/update.sh</code>. Then, mark it executable with:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo chmod</span> +x /root/update.sh
</pre></table></code></div></div><p>This is an idempotent script, you can run it over-and-over without issue.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo</span> /root/update.sh
</pre></table></code></div></div><h4 id="file-updatesh"><span class="mr-2">File: <code class="language-plaintext highlighter-rouge">update.sh</code></span><a href="#file-updatesh" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="nv">Black</span><span class="o">=</span><span class="s1">'\033[0;30m'</span>
<span class="nv">DarkGray</span><span class="o">=</span><span class="s1">'\033[1;30m'</span>
<span class="nv">Red</span><span class="o">=</span><span class="s1">'\033[0;31m'</span>
<span class="nv">LightRed</span><span class="o">=</span><span class="s1">'\033[1;31m'</span>
<span class="nv">Green</span><span class="o">=</span><span class="s1">'\033[0;32m'</span>
<span class="nv">LightGreen</span><span class="o">=</span><span class="s1">'\033[1;32m'</span>
<span class="nv">Brown</span><span class="o">=</span><span class="s1">'\033[0;33m'</span>
<span class="nv">Yellow</span><span class="o">=</span><span class="s1">'\033[1;33m'</span>
<span class="nv">Blue</span><span class="o">=</span><span class="s1">'\033[0;34m'</span>
<span class="nv">LightBlue</span><span class="o">=</span><span class="s1">'\033[1;34m'</span>
<span class="nv">Purple</span><span class="o">=</span><span class="s1">'\033[0;35m'</span>
<span class="nv">LightPurple</span><span class="o">=</span><span class="s1">'\033[1;35m'</span>
<span class="nv">Cyan</span><span class="o">=</span><span class="s1">'\033[0;36m'</span>
<span class="nv">LightCyan</span><span class="o">=</span><span class="s1">'\033[1;36m'</span>
<span class="nv">LightGray</span><span class="o">=</span><span class="s1">'\033[0;37m'</span>
<span class="nv">White</span><span class="o">=</span><span class="s1">'\033[1;37m'</span>
<span class="nv">NC</span><span class="o">=</span><span class="s1">'\033[0m'</span> <span class="c"># No Color</span>

<span class="nv">Name</span><span class="o">=</span><span class="s1">'Debian-based System Update Utility'</span>
<span class="nv">Version</span><span class="o">=</span><span class="s1">'v1.0.0-alpha.1'</span>

<span class="k">function </span>setXtermTitle <span class="o">()</span> <span class="o">{</span>

    <span class="nv">newTitle</span><span class="o">=</span><span class="nv">$1</span>

    <span class="k">if</span> <span class="o">[[</span> <span class="nt">-z</span> <span class="nv">$newTitle</span> <span class="o">]]</span>
    <span class="k">then
        case</span> <span class="s2">"</span><span class="nv">$TERM</span><span class="s2">"</span> <span class="k">in
            </span>xterm<span class="k">*</span><span class="p">|</span>rxvt<span class="k">*</span><span class="p">)</span>
                <span class="nv">PS1</span><span class="o">=</span><span class="s2">"</span><span class="se">\[\e</span><span class="s2">]0;</span><span class="nv">$newTitle</span><span class="se">\u</span><span class="s2">@</span><span class="se">\h</span><span class="s2">: </span><span class="se">\w\a\]</span><span class="nv">$PS1</span><span class="s2">"</span>
            <span class="p">;;</span>
            <span class="k">*</span><span class="p">)</span>
            <span class="p">;;</span>
        <span class="k">esac</span>
    <span class="k">else
        case</span> <span class="s2">"</span><span class="nv">$TERM</span><span class="s2">"</span> <span class="k">in
            </span>xterm<span class="k">*</span><span class="p">|</span>rxvt<span class="k">*</span><span class="p">)</span>
                <span class="nv">PS1</span><span class="o">=</span><span class="s2">"</span><span class="se">\[\e</span><span class="s2">]0;</span><span class="k">${</span><span class="nv">debian_chroot</span>:+<span class="p">(</span><span class="nv">$debian_chroot</span><span class="p">)</span><span class="k">}</span><span class="se">\u</span><span class="s2">@</span><span class="se">\h</span><span class="s2">: </span><span class="se">\w\a\]</span><span class="nv">$PS1</span><span class="s2">"</span>
            <span class="p">;;</span>
            <span class="k">*</span><span class="p">)</span>
            <span class="p">;;</span>
        <span class="k">esac</span>
    <span class="k">fi</span>
<span class="o">}</span>

<span class="k">function </span>setStatus<span class="o">(){</span>

    <span class="nv">description</span><span class="o">=</span><span class="nv">$1</span>
    <span class="nv">severity</span><span class="o">=</span><span class="nv">$2</span>

    setXtermTitle <span class="nv">$description</span>

    logger <span class="s2">"</span><span class="nv">$Name</span><span class="s2"> </span><span class="nv">$Version</span><span class="s2">: [</span><span class="k">${</span><span class="nv">severity</span><span class="k">}</span><span class="s2">] </span><span class="nv">$description</span><span class="s2">"</span>


    <span class="k">case</span> <span class="s2">"</span><span class="nv">$severity</span><span class="s2">"</span> <span class="k">in
        </span>s<span class="p">)</span>
            <span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"[</span><span class="k">${</span><span class="nv">LightGreen</span><span class="k">}</span><span class="s2">+</span><span class="k">${</span><span class="nv">NC</span><span class="k">}</span><span class="s2">] </span><span class="k">${</span><span class="nv">LightGreen</span><span class="k">}${</span><span class="nv">description</span><span class="k">}${</span><span class="nv">NC</span><span class="k">}</span><span class="s2">"</span>
        <span class="p">;;</span>
        f<span class="p">)</span>
            <span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"[</span><span class="k">${</span><span class="nv">Red</span><span class="k">}</span><span class="s2">-</span><span class="k">${</span><span class="nv">NC</span><span class="k">}</span><span class="s2">] </span><span class="k">${</span><span class="nv">LightRed</span><span class="k">}${</span><span class="nv">description</span><span class="k">}${</span><span class="nv">NC</span><span class="k">}</span><span class="s2">"</span>
        <span class="p">;;</span>
        q<span class="p">)</span>
            <span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"[</span><span class="k">${</span><span class="nv">LightPurple</span><span class="k">}</span><span class="s2">?</span><span class="k">${</span><span class="nv">NC</span><span class="k">}</span><span class="s2">] </span><span class="k">${</span><span class="nv">LightPurple</span><span class="k">}${</span><span class="nv">description</span><span class="k">}${</span><span class="nv">NC</span><span class="k">}</span><span class="s2">"</span>
        <span class="p">;;</span>
        <span class="k">*</span><span class="p">)</span>
            <span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"[</span><span class="k">${</span><span class="nv">LightCyan</span><span class="k">}</span><span class="s2">*</span><span class="k">${</span><span class="nv">NC</span><span class="k">}</span><span class="s2">] </span><span class="k">${</span><span class="nv">LightCyan</span><span class="k">}${</span><span class="nv">description</span><span class="k">}${</span><span class="nv">NC</span><span class="k">}</span><span class="s2">"</span>
        <span class="p">;;</span>
    <span class="k">esac</span>

    <span class="o">[[</span> <span class="nv">$WithVoice</span> <span class="nt">-eq</span> 1 <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="nt">-e</span> <span class="k">${</span><span class="nv">description</span><span class="k">}</span> | espeak
<span class="o">}</span>

<span class="k">function </span>runCommand<span class="o">(){</span>

    <span class="nv">beforeText</span><span class="o">=</span><span class="nv">$1</span>
    <span class="nv">afterText</span><span class="o">=</span><span class="nv">$2</span>
    <span class="nv">commandToRun</span><span class="o">=</span><span class="nv">$3</span>

    setStatus <span class="s2">"</span><span class="k">${</span><span class="nv">beforeText</span><span class="k">}</span><span class="s2">"</span> <span class="s2">"s"</span>

    <span class="nb">eval</span> <span class="nv">$commandToRun</span>

    setStatus <span class="s2">"</span><span class="nv">$afterText</span><span class="s2">"</span> <span class="s2">"s"</span>

<span class="o">}</span>

<span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="k">${</span><span class="nv">LightPurple</span><span class="k">}</span><span class="nv">$Name</span><span class="s2"> </span><span class="nv">$Version</span><span class="k">${</span><span class="nv">NC</span><span class="k">}</span><span class="s2">"</span>


<span class="k">if</span> <span class="o">[[</span> <span class="nv">$1</span> <span class="o">==</span> <span class="s2">"?"</span> <span class="o">||</span> <span class="nv">$1</span> <span class="o">==</span> <span class="s2">"/?"</span> <span class="o">||</span> <span class="nv">$1</span> <span class="o">==</span> <span class="s2">"--help"</span> <span class="o">]]</span><span class="p">;</span>
<span class="k">then
    </span>setStatus <span class="s2">"USAGE: sudo </span><span class="nv">$0</span><span class="s2">"</span> <span class="s2">"i"</span>
    <span class="nb">exit</span> <span class="nt">-2</span>
<span class="k">fi

if</span> <span class="o">[[</span> <span class="si">$(</span><span class="nb">whoami</span><span class="si">)</span> <span class="o">!=</span> <span class="s2">"root"</span> <span class="o">]]</span><span class="p">;</span>
<span class="k">then
    </span>setStatus <span class="s2">"ERROR: This utility must be run as root (or sudo)."</span> <span class="s2">"f"</span>
    <span class="nb">exit</span> <span class="nt">-1</span>
<span class="k">fi

</span><span class="nv">WithVoice</span><span class="o">=</span>0

<span class="k">if</span> <span class="o">[[</span> <span class="nv">$WithVoice</span> <span class="nt">-eq</span> 1 <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="si">$(</span>which espeak | <span class="nb">wc</span> <span class="nt">-l</span><span class="si">)</span> <span class="nt">-eq</span> 0<span class="o">)</span> <span class="o">]]</span><span class="p">;</span>
<span class="k">then
    </span>setStatus <span class="s2">"ERROR: To use speech, please install espeak (sudo apt-get install espeak)"</span> <span class="s2">"f"</span>
    <span class="nb">exit</span> <span class="nt">-1</span>
<span class="k">elif</span> <span class="o">[[</span> <span class="nv">$WithVoice</span> <span class="nt">-eq</span> 1 <span class="o">]]</span><span class="p">;</span>
<span class="k">then
    </span>setStatus <span class="s2">"Voice detected - using espeak."</span> <span class="s2">"s"</span>
<span class="k">fi

if</span> <span class="o">[</span> <span class="si">$(</span>which neofetch | <span class="nb">wc</span> <span class="nt">-l</span><span class="si">)</span> <span class="nt">-gt</span> 0 <span class="o">]</span><span class="p">;</span>
<span class="k">then
    </span><span class="nb">echo</span> <span class="nt">-e</span> <span class="nt">-n</span> <span class="s2">"</span><span class="k">${</span><span class="nv">Yellow</span><span class="k">}</span><span class="s2">"</span>
    neofetch
    <span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="k">${</span><span class="nv">NC</span><span class="k">}</span><span class="s2">"</span>
<span class="k">fi

if</span> <span class="o">[</span> <span class="si">$(</span>which figlet | <span class="nb">wc</span> <span class="nt">-l</span><span class="si">)</span> <span class="nt">-gt</span> 0 <span class="o">]</span><span class="p">;</span>
<span class="k">then
    </span><span class="nb">echo</span> <span class="nt">-e</span> <span class="nt">-n</span> <span class="s2">"</span><span class="k">${</span><span class="nv">Yellow</span><span class="k">}</span><span class="s2">"</span>
    <span class="nb">echo</span> <span class="si">$(</span><span class="nb">hostname</span><span class="si">)</span> | figlet
    <span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="k">${</span><span class="nv">NC</span><span class="k">}</span><span class="s2">"</span>
<span class="k">fi

</span>setStatus <span class="s2">"Update starting..."</span> <span class="s2">"s"</span>

runCommand <span class="s2">"STEP 1 of 4: Refreshing repository cache..."</span> <span class="s2">"Repository cache refreshed."</span> <span class="s2">"sudo apt-get update -y"</span>
runCommand <span class="s2">"STEP 2 of 4: Upgrading all existing packages..."</span> <span class="s2">"Existing packages upgraded."</span> <span class="s2">"sudo apt-get upgrade -y"</span>
runCommand <span class="s2">"STEP 3 of 4: Upgrading packages with conflict detection..."</span> <span class="s2">"Upgrade processed."</span> <span class="s2">"sudo apt-get dist-upgrade -y"</span>
runCommand <span class="s2">"STEP 4 of 4: Cleaning up unused and cached packages..."</span> <span class="s2">"Package cleanup complete."</span> <span class="s2">"sudo apt-get autoclean -y &amp;&amp; sudo apt-get autoremove -y"</span>

setStatus <span class="s2">"Update complete."</span> <span class="s2">"s"</span>

<span class="c"># if [ $(which rpi-update | wc -l) -gt 0 ]; then</span>
<span class="c">#         echo -e "[${LightGreen}+${NC}] ${LightGreen}Raspberry Pi Detected.${NC}"</span>
<span class="c">#         [[ $WithVoice -eq 1 ]] &amp;&amp; echo -e "Raspberry Pi Detected." | espeak</span>
<span class="c">#         echo -e "[${LightGreen}+${NC}] ${LightGreen}Updating the Raspberry Pi firmware to the latest (if available)...${NC}"</span>
<span class="c">#         [[ $WithVoice -eq 1 ]] &amp;&amp; echo -e "Updating the Raspberry Pi firmware to the latest." | espeak</span>
<span class="c">#         sudo rpi-update</span>
<span class="c">#         echo -e "[${LightGreen}+${NC}] ${LightGreen}Done updating firmware.${NC}"</span>
<span class="c">#         [[ $WithVoice -eq 1 ]] &amp;&amp; echo -e "Done updating firmware." | espeak</span>
<span class="c"># fi</span>


<span class="k">if</span> <span class="o">[</span> <span class="nt">-f</span> /var/run/reboot-required <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span>setStatus <span class="s2">"PLEASE NOTE: A reboot is required."</span> <span class="s2">"i"</span>
    setStatus <span class="s2">"Would you like to reboot now?"</span> <span class="s2">"?"</span>
    <span class="o">[[</span> <span class="nv">$WithVoice</span> <span class="nt">-eq</span> 1 <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"Would you like to reboot now?"</span> | espeak
    <span class="k">while </span><span class="nb">true</span><span class="p">;</span> <span class="k">do
        </span><span class="nb">read</span> <span class="nt">-e</span> <span class="nt">-r</span> <span class="nt">-p</span> <span class="s2">"&gt; "</span> choice
        <span class="k">case</span> <span class="s2">"</span><span class="nv">$choice</span><span class="s2">"</span> <span class="k">in
            </span>y|Y <span class="p">)</span>
                setStatus <span class="s2">"Rebooting..."</span> <span class="s2">"i"</span>
                <span class="nb">sudo </span>reboot
                <span class="nb">break</span>
            <span class="p">;;</span>
            n|N <span class="p">)</span>
                setStatus <span class="s2">"Done."</span> <span class="s2">"+"</span>
                <span class="nb">break</span>
            <span class="p">;;</span>
            <span class="k">*</span> <span class="p">)</span>
                setStatus <span class="s2">"Invalid response. Use 'y' or 'n'."</span> <span class="s2">"-"</span>
            <span class="p">;;</span>
        <span class="k">esac</span>
    <span class="k">done

else
    </span>setStatus <span class="s2">"No reboot is required."</span> <span class="s2">"i"</span>
<span class="k">fi

</span>setStatus <span class="s2">"System update complete."</span> <span class="s2">"+"</span>
</pre></table></code></div></div><h3 id="update-script-for-batch"><span class="mr-2">Update Script for Batch</span><a href="#update-script-for-batch" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Again, depending on your risk tolerance, this may not be an option for you. You can take that <code class="language-plaintext highlighter-rouge">update.sh</code> file, and modify from line 150-171, and make it so: if it needs a reboot, then you reboot it. If this update is running via batch process in the middle of the night, then it will have updated the OS and quietly rebooted when it’s done.</p><p>If you would like to have functionality like this consider changing the <code class="language-plaintext highlighter-rouge">if..then</code> block at the end of the file to something like this:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="k">if</span> <span class="o">[</span> <span class="nt">-f</span> /var/run/reboot-required <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">sudo </span>reboot
<span class="k">else
    </span>setStatus <span class="s2">"No reboot is required."</span> <span class="s2">"i"</span>
<span class="k">fi</span>
</pre></table></code></div></div><p>Save that modified file as <code class="language-plaintext highlighter-rouge">/root/update-batch.sh</code>. Then, you can turn that into a regular batch job, via cron.</p><h2 id="automating-upgrades"><span class="mr-2">Automating Upgrades</span><a href="#automating-upgrades" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Whether you want to fully-upgrade your system on a regular basis, or if you just want to stay current with critical security updates, you should have some kind of upgrade automation in place. Below are some options.</p><h3 id="using-unattended-upgrades"><span class="mr-2">Using <code class="language-plaintext highlighter-rouge">unattended-upgrades</code></span><a href="#using-unattended-upgrades" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>On Ubuntu, if you install this package:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>unattended-upgrades
</pre></table></code></div></div><p>You can then configure your system to always stay updated with the latest security patches. You configure this by running:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>dpkg-reconfigure unattended-upgrades
</pre></table></code></div></div><p>That will show you a screen like this, where you can choose:</p><p><img data-src="/assets/img/ubuntu-unattended-upgrades.png" alt="Ubuntu Unattended Upgrades" data-proofer-ignore></p><h3 id="using-a-cron-job"><span class="mr-2">Using a <code class="language-plaintext highlighter-rouge">cron</code> job</span><a href="#using-a-cron-job" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>If you created an <code class="language-plaintext highlighter-rouge">update-batch.sh</code> from the previous section, you can now run that on a regular basis. Edit your cron jobs by running:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>crontab <span class="nt">-e</span>
</pre></table></code></div></div><p>Then, add line like the following to run this job once per day at 8am:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># m     h       dom     mon     dow     command</span>
  0     8       <span class="k">*</span>       <span class="k">*</span>       <span class="k">*</span>       /root/update-batch.sh <span class="o">&gt;</span> /root/update-batch_lastrun.log 2&gt;&amp;1
</pre></table></code></div></div><p>To change the time frequency to something more tolerable, check out:</p><blockquote><p><strong>https://crontab.guru</strong></p></blockquote><p>This website will help you figure out the correct crontab string to use, to represent the correct frequency that you want.</p><h2 id="os-upgrades"><span class="mr-2">OS Upgrades</span><a href="#os-upgrades" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Operating System (OS) upgrades tend to be more risky, and tend to break more things. Therefore, they should probably be scheduled. It would be ideal to have 1-2 backups on-hand too, in case you need to fully-recover.</p><p>On an Ubuntu-based system, you check-for, and also kick-off an operating system upgrade by running:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span><span class="k">do</span><span class="nt">-release-upgrade</span>
</pre></table></code></div></div><p>Then, follow the prompts.</p><blockquote class="prompt-warning"><div><p><strong>Warning:</strong></p><p>Please do make sure you have backups, and plan for the worst. If the operating system upgrade fails, it can leave everything on that server unusable. So, plan, prep, and schedule accordingly!</p></div></blockquote><h2 id="ssl-certificate-renewals"><span class="mr-2">SSL Certificate Renewals</span><a href="#ssl-certificate-renewals" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Assuming you are using <code class="language-plaintext highlighter-rouge">certbot</code> on your web server as a way to provision and update your SSL certificates, you can simply run <code class="language-plaintext highlighter-rouge">certbot renew</code> on a regular basis. If checks locally if the certificates are close to expiring. If they are, they it reaches out to <a href="https://letsencrypt.org/">LetsEncrypt</a> to renew them. Otherwise, the program exits.</p><p>To set up this auto-renewal, edit your cron jobs with:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>crontab <span class="nt">-e</span>
</pre></table></code></div></div><p>And then add a command like this:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># m     h       dom     mon     dow     command</span>
  0     0       <span class="k">*</span>       <span class="k">*</span>       SAT     certbot renew <span class="o">&gt;</span> /root/certbot_lastrun.log 2&gt;&amp;1
</pre></table></code></div></div><p>This will run this renewal process every Saturday at midnight (technically, Friday night). To change the time frequency to something else, check out:</p><blockquote><p><strong>https://crontab.guru</strong></p></blockquote><p>This website will help you figure out the correct crontab string to use, to represent the correct frequency that you want. Thie <code class="language-plaintext highlighter-rouge">certbot</code> first only runs locally to see if the certificates are close to expiration. If they are not, it exits out - so there is not much harm in running this program on a regular basis.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/infrastructure/'>Infrastructure</a>, <a href='/categories/maintenance/'>Maintenance</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/homelab/" class="post-tag no-text-decoration" >homelab</a> <a href="/tags/ubuntu/" class="post-tag no-text-decoration" >ubuntu</a> <a href="/tags/infrastructure/" class="post-tag no-text-decoration" >infrastructure</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Patching+and+Updating+Ubuntu+-+TechByTheNerd&url=https%3A%2F%2Fwww.techbythenerd.com%2Fposts%2Fpatching-and-updating-ubuntu%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Patching+and+Updating+Ubuntu+-+TechByTheNerd&u=https%3A%2F%2Fwww.techbythenerd.com%2Fposts%2Fpatching-and-updating-ubuntu%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fwww.techbythenerd.com%2Fposts%2Fpatching-and-updating-ubuntu%2F&text=Patching+and+Updating+Ubuntu+-+TechByTheNerd" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/learning-rsync-with-chatgpt/">Learning rsync with ChatGPT</a><li><a href="/posts/expanding-disk-volumes-on-ubuntu/">Expanding Disk Volumes on Ubuntu</a><li><a href="/posts/virtualbox-guest-additions/">VirtualBox Guest Additions</a><li><a href="/posts/installing-ubuntu-into-virtualbox-on-non-m1-macos/">Installing Ubuntu into VirtualBox on (non-M1) macOS</a><li><a href="/posts/patching-and-updating-ubuntu/">Patching and Updating Ubuntu</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/homelab/">homelab</a> <a class="post-tag" href="/tags/infrastructure/">infrastructure</a> <a class="post-tag" href="/tags/ubuntu/">ubuntu</a> <a class="post-tag" href="/tags/virtualization/">virtualization</a> <a class="post-tag" href="/tags/virtualbox/">virtualbox</a> <a class="post-tag" href="/tags/proxmox/">proxmox</a> <a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/techno-tim/">techno-tim</a> <a class="post-tag" href="/tags/backups/">backups</a> <a class="post-tag" href="/tags/centos/">centos</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/installing-ubuntu-into-virtualbox-on-non-m1-macos/"><div class="card-body"> <em class="small" data-ts="1654016340" data-df="ll" > May 31, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Installing Ubuntu into VirtualBox on (non-M1) macOS</h3><div class="text-muted small"><p> Overview PLEASE NOTE: This only applies to older, non-M1 Apple hardware. If you attempt this on an M1 device, you’ll get an error during installation that only amd64 processors are supported. ...</p></div></div></a></div><div class="card"> <a href="/posts/install-ubuntu-from-iso/"><div class="card-body"> <em class="small" data-ts="1654042380" data-df="ll" > May 31, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Install Ubuntu from ISO</h3><div class="text-muted small"><p> Overview There are several scenarios where you might run a server. In cases like cloud providers (e.g. Digital Ocean, Microsoft Azure, Amazon AWS, etc) - you typically just choose an OS option, an...</p></div></div></a></div><div class="card"> <a href="/posts/installing-ubuntu-into-virtualbox-on-windows11/"><div class="card-body"> <em class="small" data-ts="1654572960" data-df="ll" > Jun 6, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Installing Ubuntu into VirtualBox on Windows 11</h3><div class="text-muted small"><p> Overview Suppose you want to play around with Linux and maybe you’ve heard people talking about Ubuntu. But you don’t have an extra computer laying around to try it, and you certainly don’t want t...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/installing-ubuntu-into-virtualbox-on-non-m1-macos/" class="btn btn-outline-primary" prompt="Older"><p>Installing Ubuntu into VirtualBox on (non-M1) macOS</p></a> <a href="/posts/install-ubuntu-from-iso/" class="btn btn-outline-primary" prompt="Newer"><p>Install Ubuntu from ISO</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/homelab/">homelab</a> <a class="post-tag" href="/tags/infrastructure/">infrastructure</a> <a class="post-tag" href="/tags/ubuntu/">ubuntu</a> <a class="post-tag" href="/tags/virtualization/">virtualization</a> <a class="post-tag" href="/tags/virtualbox/">virtualbox</a> <a class="post-tag" href="/tags/proxmox/">proxmox</a> <a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/techno-tim/">techno-tim</a> <a class="post-tag" href="/tags/backups/">backups</a> <a class="post-tag" href="/tags/centos/">centos</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/username">TechByTheNerd</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
